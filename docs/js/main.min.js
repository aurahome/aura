/* eslint-disable func-names */
/* eslint-disable prefer-arrow-callback */
/* eslint-disable no-undef */
$(document).ready(function () {
  $('.main-slider').slick({
    infinite: true,
    slidesToShow: 1,
    slidesToScroll: 1,
    dots: true,
    speed: 300,
    autoplaySpeed: 2000,
  });
});


/* global window, document */

const header = document.querySelector('header');
const body = document.querySelector('body');
const searchBtn = document.querySelector('#scroll-search');

window.addEventListener('scroll', () => {
  if (body.scrollTop > 0) {
    header.classList.add('sticky');
    searchBtn.classList.remove('hidden');
  } else {
    header.classList.remove('sticky');
    searchBtn.classList.add('hidden');
  }
}, true);

/* eslint-disable func-names */
/* eslint-disable no-undef */
/* eslint-disable prefer-arrow-callback */
window.addEventListener('scroll', function () {
  const productsLoop = document.querySelector('.products-loop');
  if (body.scrollTop > 85) {
    productsLoop.classList.add('products-loop_padding-top_enabled');
  } else {
    productsLoop.classList.remove('products-loop_padding-top_enabled');
  }
}, true);

/* eslint-disable func-names */
/* eslint-disable prefer-arrow-callback */
/* eslint-disable no-undef */
$(document).ready(function () {
  $('.collection-slider').slick({
    infinite: true,
    slidesToShow: 1,
    slidesToScroll: 1,
    dots: true,
    speed: 300,
    autoplaySpeed: 2000,
  });
});

/* eslint-disable func-names */
/* eslint-disable no-undef */
/* eslint-disable prefer-arrow-callback */
$(document).ready(function () {
  $('.color-panel__element').on('click', function () {
    $('.color-panel__element').each(function () {
      $(this).removeClass('color-panel__element_active');
    });
    $(this).addClass('color-panel__element_active');
  });
});

/* eslint-disable prefer-arrow-callback */
/* eslint-disable no-undef */
$(document).ready(function () {
  $('.slider-product-card').slick({
    infinite: true,
    slidesToShow: 1,
    slidesToScroll: 1,
    dots: true,
    speed: 300,
    autoplaySpeed: 2000,
  });
});

const $carousel = $('.slider-products');

const settings = {
  dots: false,
  arrows: false,
  slide: '.slider-item',
  slidesToShow: 4,
  centerMode: true,
  centerPadding: '160px',
  speed: 300,
  autoplaySpeed: 2000,
  adaptiveHeight: true,
};

function setSlideVisibility() {
  // Find the visible slides i.e. where aria-hidden="false"
  const visibleSlides = $carousel.find('.slider-item[aria-hidden="false"]');
  // Make sure all of the visible slides have an opacity of 1
  $(visibleSlides).each(function () {
    $(this).css('opacity', 1);
  });

  // Set the opacity of the first and last partial slides.
  $(visibleSlides).first().prev().css('opacity', 0);
}

$carousel.slick(settings);
$carousel.slick('slickGoTo', 1);
setSlideVisibility();

$carousel.on('afterChange', function () {
  setSlideVisibility();
});



function select(item) {
  return document.querySelector(item);
}

const toggle3col = select('#grid-3col');
const toggle4col = select('#grid-4col');

const productsLoop = select('.products-loop');

function reloadSlick() {
  $('.slider-product-card').slick('unslick');
  $('.slider-product-card').slick({
    infinite: true,
    slidesToShow: 1,
    slidesToScroll: 1,
    dots: true,
    speed: 300,
    autoplaySpeed: 2000,
  });
}

function toggleProductLoop() {
  const loopGrid = document.querySelector('.loop-grid');
  
  const productCards = productsLoop.querySelectorAll('.product-card');

  for (let item of productCards) {
    const productCardImages = item.querySelector('.product-card__images');
    if (toggle3col.checked) {
      loopGrid.classList.remove('loop-grid_columns_4');
      loopGrid.classList.add('loop-grid_columns_3');
      productCardImages.classList.remove('product-card__images_size_medium');
      productCardImages.classList.add('product-card__images_size_large');
      reloadSlick();
    }
    if (toggle4col.checked) {
      loopGrid.classList.remove('loop-grid_columns_3');
      loopGrid.classList.add('loop-grid_columns_4');
      productCardImages.classList.remove('product-card__images_size_large');
      productCardImages.classList.add('product-card__images_size_medium');
      reloadSlick();
    }
  }
}





window.addEventListener('scroll', function(event) {
  const body = document.querySelector('body');
  const filters = document.querySelector('.category-top-filters');
  console.log(scrollY, body.scrollTop, event.target);
  if (body.scrollTop > 85) {
    filters.classList.add('sticky');
  } else {
    filters.classList.remove('sticky');
  }
}, true);

function dropdownLogic() {
  const dropdownsList = document.querySelectorAll('.dropdown');
  for (let item of dropdownsList) {
    item.addEventListener('click', function(e) {
      item.classList.toggle('active');
    })
    document.addEventListener('click', function(e) {
      let target = e.target;
      let itsDropdown = target === item || item.contains(target);
      let isActive = item.classList.contains('active');

      if (!itsDropdown && isActive) {
        item.classList.toggle('active');
      }
    })
  }
}

function windowOnLoad() {
  toggle3col.addEventListener('click', toggleProductLoop);
  toggle4col.addEventListener('click', toggleProductLoop);
  //scrollingHeader();
  //window.addEventListener("scroll", myFunction);
  dropdownLogic();
}

window.onload = windowOnLoad();

//# sourceMappingURL=../sourcemaps/main.min.js.map
